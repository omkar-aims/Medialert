<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <title>My Medicine Reminders</title>
 
  <link rel="stylesheet" href="{% static 'medicine_management/css/m4.css' %}">

</head>
<body>
  <div class="container">
    <h2>My Medicine Reminders</h2>

    {% if reminders %}
     <table>
  <thead>
    <tr>
      <th>Medicine Name</th>
      <th>Reminder Time</th>
      <th>Notification Method</th>
      <th>Status</th>
      <th>Last Sent</th>
      <th>Taken</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {% for reminder in reminders %}
      <tr>
        <td>{{ reminder.medicine_name }}</td>
        <td>{{ reminder.reminder_time|time:"h:i A" }}</td>
        <td>{{ reminder.get_notification_method_display }}</td>
        <td>
          {% if reminder.status == "processing" %}
            <span class="status-processing">Processing</span>
          {% elif reminder.status == "sent" %}
            <span class="status-sent">Sent</span>
          {% elif reminder.status == "failed" %}
            <span class="status-failed">Failed</span>
          {% else %}
            <span>-</span>
          {% endif %}
        </td>
        <td>
          {% if reminder.last_sent_time %}
            {{ reminder.last_sent_time|date:"M d, Y h:i A" }}
          {% else %}
            â€”
          {% endif %}
        </td>

        <td>
          {% if reminder.is_taken %}
            <span style="color:green; font-weight:bold;">Taken</span>
          {% else %}
            <span style="color:red; font-weight:bold;">Not Taken</span>
          {% endif %}
        </td>
        <td style="white-space: nowrap;">
        <a href="{% url 'edit_medicine_reminder' reminder.id %}" title="Edit Reminder" style="margin-right: 10px;">
          <i class="fa-solid fa-pen-to-square" style="color: #007bff; font-size: 18px;"></i>
        </a>

        <a href="{% url 'delete_medicine_reminder' reminder.id %}" title="Delete Reminder" onclick="return confirm('Are you sure you want to delete this reminder?');">
          <i class="fa-solid fa-trash" style="color: red; font-size: 18px;"></i>
        </a>
      </td>

      </tr>
    {% endfor %}
  </tbody>
</table>

    {% else %}
      <p>No reminders set yet.</p>
    {% endif %}

    <!-- <a href="{% url 'medicine_reminder' %}" class="set-reminder-link">Set New Reminder</a> -->
  </div>

<script src="{% static 'medicine_management/js/medicine_reminders_list.js' %}"></script>
</body>
</html>